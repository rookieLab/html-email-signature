<template>
    <div>
        <table cellpadding="0" width="500" style="border-collapse: collapse; font-size: 15.8px;">
            <tr>
                <td style="margin: 0.1px; padding: 0px;">
                    <table cellpadding="0" style="border-collapse: collapse;">
                        <tr>
                            <td valign="middle"
                                style="margin: 0.1px; padding: 0px; font: 15.8px / 20.1px Arial, Helvetica, sans-serif; color: rgb(0, 0, 1);">
                                <table cellpadding="0" style="border-collapse: collapse;">
                                    <tr>
                                        <td style="margin: 0.1px; padding: 4px 15px 0px 0px; cursor: pointer;"><span
                                                style="border-radius: 15%; width: 29px; height: 29px; display: block; text-align: center; background-color: rgb(255, 255, 255); font-size: 12px; font-family: initial; line-height: 1;"><svg
                                                    viewBox="0 0 1053 1024" xmlns="http://www.w3.org/2000/svg"
                                                    style="position: relative; top: 5.8px; width: 17.4px;">
                                                    <path
                                                        d="M529.314 0c-282.77 0-512 229.23-512 512s229.23 512 512 512c282.77 0 512-229.23 512-512s-229.23-512-512-512zM796.625 362.543c26.244-3.104 51.27-10.053 74.533-20.331-17.39 25.922-39.386 48.681-64.758 66.899 0.252 5.533 0.377 11.115 0.377 16.715 0 170.821-130.525 367.774-369.199 367.774-73.275 0-141.499-21.39-198.893-58.078 10.132 1.205 20.486 1.814 30.938 1.814 60.81 0 116.752-20.658 161.171-55.331-56.794-1.050-104.705-38.423-121.215-89.764 7.917 1.504 16.036 2.305 24.415 2.305 11.817 0 23.303-1.571 34.181-4.541-59.351-11.867-104.097-64.102-104.097-126.73 0-0.541 0-1.088 0.010-1.638 17.486 9.708 37.509 15.518 58.768 16.185-34.798-23.175-57.722-62.754-57.722-107.587 0-23.684 6.406-45.902 17.573-64.989 64.005 78.225 159.623 129.679 267.465 135.069-2.226-9.468-3.379-19.327-3.379-29.459 0-71.37 58.111-129.255 129.761-129.255 37.344 0 71.066 15.694 94.738 40.805 29.544-5.796 57.326-16.542 82.4-31.358-9.708 30.2-30.269 55.504-57.066 71.496z"
                                                        fill="#4E2504"></path>
                                                </svg></span></td>
                                    </tr>
                                    <tr>
                                        <td style="margin: 0.1px; padding: 4px 15px 0px 0px; cursor: pointer;"><span
                                                style="border-radius: 15%; width: 29px; height: 29px; display: block; text-align: center; background-color: rgb(255, 255, 255); font-size: 12px; font-family: initial; line-height: 1;"><svg
                                                    viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"
                                                    style="position: relative; top: 5.8px; width: 17.4px;">
                                                    <path
                                                        d="M1024 512.329c0-282.951-229.23-512.329-512-512.329s-512 229.378-512 512.329c0 255.715 187.23 467.671 432 506.101v-358.005h-130v-148.096h130v-112.872c0-128.403 76.44-199.328 193.39-199.328 56 0 114.61 10.006 114.61 10.006v126.081h-64.56c-63.6 0-83.44 39.496-83.44 80.052v96.061h142l-22.7 148.096h-119.3v358.005c244.77-38.43 432-250.386 432-506.101z"
                                                        fill="#4E2504"></path>
                                                </svg></span></td>
                                    </tr>
                                    <tr>
                                        <td style="margin: 0.1px; padding: 4px 15px 0px 0px; cursor: pointer;"><span
                                                style="border-radius: 15%; width: 29px; height: 29px; display: block; text-align: center; background-color: rgb(255, 255, 255); font-size: 12px; font-family: initial; line-height: 1;"><svg
                                                    viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"
                                                    style="position: relative; top: 5.8px; width: 17.4px;">
                                                    <path
                                                        d="M365.714 327.385h202.407v104.748h2.894c28.16-50.993 97.095-104.748 199.819-104.748 213.653 0 253.166 134.28 253.166 308.924v355.692h-210.983v-315.321c0-75.212-1.525-171.953-109.746-171.953-109.883 0-126.651 81.907-126.651 166.491v320.783h-210.905v-664.615zM0 327.385h219.429v664.615h-219.429v-664.615zM219.429 142.769c0 61.176-49.121 110.769-109.714 110.769s-109.714-49.593-109.714-110.769c0-61.176 49.121-110.769 109.714-110.769s109.714 49.593 109.714 110.769z"
                                                        fill="#4E2504"></path>
                                                </svg></span></td>
                                    </tr>
                                    <tr>
                                        <td style="margin: 0.1px; padding: 4px 15px 0px 0px; cursor: pointer;"><span
                                                style="border-radius: 15%; width: 29px; height: 29px; display: block; text-align: center; background-color: rgb(255, 255, 255); font-size: 12px; font-family: initial; line-height: 1;"><svg
                                                    viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"
                                                    style="position: relative; top: 5.8px; width: 17.4px;">
                                                    <path
                                                        d="M934.337 501.609c0 32.105-3.53 63.312-10.191 93.506 17.023 33.807 26.604 71.934 26.604 112.201 0 139.586-114.688 252.684-256.215 252.684-43.827 0-85.051-18.091-121.149-37.196-26.2 4.774-53.233 7.295-80.881 7.295-244 0-441.773-187.816-441.773-428.49 0-29.99 3.068-59.285 8.944-87.566-22.319-37.547-35.2-81.199-35.2-127.805 0-139.587 114.692-252.714 256.247-252.714 50.078 0 96.802 14.242 136.282 38.79 24.548-4.169 49.792-6.369 75.524-6.369 244.034 0 441.807 195.080 441.807 435.664zM619.203 736.412c32.851-13.692 57.807-32.739 74.859-56.969 16.994-24.259 25.561-51.614 25.551-82.013 0-25.42-4.949-46.87-14.765-64.356-9.811-17.54-23.532-32.071-41.048-43.535-17.54-11.375-38.849-21.131-63.829-29.15-25.015-7.991-52.946-15.342-83.749-21.973-24.659-5.733-42.35-10.045-53.031-13.027-10.681-3.037-21.276-7.148-31.667-12.417-10.506-5.24-18.729-11.466-24.662-18.846-5.933-7.323-8.974-16.065-8.974-26.081 0-16.239 8.799-30.192 26.342-41.712 17.543-11.606 40.644-17.34 69.216-17.34 30.857 0 53.204 5.326 67.16 15.979 13.951 10.624 25.849 25.444 35.835 44.434 7.675 13.288 14.824 22.841 21.421 28.688 6.602 5.816 16.243 8.77 28.95 8.77 13.926 0 25.561-4.89 34.884-14.617 9.318-9.699 13.951-20.7 13.951-32.828 0-13.199-3.73-26.92-11.201-40.816-7.441-13.982-19.28-27.295-35.465-40.005-16.15-12.71-36.44-22.898-60.962-30.6-24.517-7.612-53.58-11.463-87.162-11.463-42 0-78.592 5.762-109.682 17.339-31.146 11.581-54.854 28.11-71.268 49.646-16.443 21.508-24.634 46.084-24.634 73.816 0 29.034 7.759 53.35 23.333 72.976 15.518 19.54 36.59 34.968 63.077 46.346 26.456 11.288 59.37 21.246 98.653 29.672 29.409 6.164 52.859 12.010 70.374 17.54 17.54 5.471 31.842 13.434 42.93 23.854 11.059 10.333 16.613 23.966 16.613 40.643 0 21.046-10.303 38.678-30.798 52.716-20.553 14.097-47.241 21.104-80.067 21.104-23.854 0-43.162-3.53-57.868-10.45-14.646-6.978-26.052-15.892-34.1-26.634-8.134-10.737-15.632-24.137-22.608-40.204-5.673-13.522-12.592-23.679-20.697-30.54-8.048-6.919-17.975-10.308-29.671-10.308-14.388 0-26.287 4.369-35.607 13.258-9.32 8.772-13.982 19.368-13.982 31.7 0 21.333 7.784 43.276 23.301 65.799 15.575 22.523 35.807 40.585 60.645 54.072 35.114 18.788 79.638 28.17 133.625 28.17 45.012 0 83.919-6.836 116.775-20.641z"
                                                        fill="#4E2504"></path>
                                                </svg></span></td>
                                    </tr>
                                </table>
                            </td>
                            <td valign="middle" style="margin: 0.1px; padding: 0px;">
                                <table cellpadding="0" style="border-collapse: collapse;">
                                    <tr>
                                        <td
                                            style="margin: 0.1px; padding: 0px 0px 2px; font: 19.1px / 24.2px Arial, Helvetica, sans-serif; color: rgb(0, 0, 1);">
                                            <span
                                                style="color: rgb(78, 37, 4); font-weight: 600; cursor: pointer;">Brinley
                                                Morris</span></td>
                                    </tr>
                                    <tr>
                                        <td
                                            style="margin: 0.1px; padding: 0px 0px 5px; font: 15.8px / 20.1px Arial, Helvetica, sans-serif; color: rgb(146, 106, 76);">
                                            <span style="cursor: pointer;">General Lawyer at</span>&nbsp;<span
                                                style="cursor: pointer;">Morris Co.</span></td>
                                    </tr>
                                    <tr style="cursor: pointer;">
                                        <td
                                            style="margin: 0.1px; padding: 1px 0px; font: 15.8px / 20.1px Arial, Helvetica, sans-serif; color: rgb(146, 106, 76);">
                                            <span
                                                style="color: rgb(146, 106, 76); text-decoration: none; font-family: Arial, Helvetica, sans-serif;">3467-284-14</span>,&nbsp;<span
                                                style="color: rgb(146, 106, 76); text-decoration: none; font-family: Arial, Helvetica, sans-serif;">2673-254-91</span>
                                        </td>
                                    </tr>
                                    <tr style="cursor: pointer;">
                                        <td
                                            style="margin: 0.1px; padding: 1px 0px; font: 15.8px / 20.1px Arial, Helvetica, sans-serif; color: rgb(146, 106, 76);">
                                            <span
                                                style="color: rgb(146, 106, 76); text-decoration: none; font-family: Arial, Helvetica, sans-serif;">morris@mysignature.io</span>
                                        </td>
                                    </tr>
                                    <tr style="cursor: pointer;">
                                        <td
                                            style="margin: 0.1px; padding: 1px 0px; font: 15.8px / 20.1px Arial, Helvetica, sans-serif; color: rgb(146, 106, 76);">
                                            <span
                                                style="color: rgb(146, 106, 76); text-decoration: none; font-family: Arial, Helvetica, sans-serif;">mysignature.io</span>
                                        </td>
                                    </tr>
                                    <tr style="cursor: pointer;">
                                        <td
                                            style="margin: 0.1px; padding: 1px 0px; font: 15.8px / 20.1px Arial, Helvetica, sans-serif; color: rgb(146, 106, 76);">
                                            <span style="color: rgb(146, 106, 76);">13 Sunny St., Boston,
                                                US.</span></td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
        <div>
            <table width="377" cellpadding="0" style="border-collapse: collapse;">
                <tr>
                    <td
                        style="margin: 0.1px; padding: 15px 0px 0px; font: 12.1px / 15.3px Arial, Helvetica, sans-serif; color: rgb(195, 187, 181); cursor: pointer;">
                        IMPORTANT: The contents of this email and any attachments are confidential. It is strictly
                        forbidden to share any part of this message with any third party, without a written consent of
                        the sender. If you received this message by mistake, please reply to this message and follow
                        with its deletion, so that we can ensure such a mistake does not occur in the future.</td>
                </tr>
            </table>
            <table width="500" cellspacing="0" cellpadding="0" border="0">
                <tr>
                    <td style="margin: 0.1px; padding-top: 10px; cursor: pointer;"><img
                            src="https://img.mysignature.io/b/2/9/e/29e9978b-dd7c-5bac-8d38-6e9f0c6b9b34.png?time=1709051112"
                            valign="top" width="376" alt="created with MySignature.io" style="display: block;"></td>
                </tr>
            </table>
            <table width="500" cellspacing="0" cellpadding="0" border="0">
                <tr>
                    <td style="margin: 0.1px; line-height: 1px; font-size: 1px; height: 1px;">&nbsp;</td>
                </tr>
            </table>
        </div>
    </div>
</template>
<script>
import { shallowRef, ref, computed } from 'vue'
import { useStore } from '@/stores/store'
import { useEditingStore, useTemplatesStore } from '@/stores'
import * as iconComponents from '@/components/svg-icon-a'
import jsonData from '@/stores/data.json'

export default {
    name: 'Template77',
    data() {
        return {
            editing: {},
            socialIconsMap: {}
        }
    },
    props: {
                type: {
            type: String,
            default: 'preview' // editing | preview
        },
        data: {
            type: Object,
            default: () => (null)
        }
    },
    methods: {
        // saveTemplate() {
        //     this.store.saveTemplate('Template1', this.data);
        // },
         initEditingStore() {
            if (this.type === 'preview') {
                let data = this.store.loadTemplateByName(this.$options.name);
                if (!data) {
                    data = this.templates.getTemplate(this.$options.name)
                }
                this.editing = data
            }

            if (this.type === 'editing') {
                let data = this.store.loadTemplateByName(this.$options.name);
                if (!data) {
                    data = this.templates.getTemplate(this.$options.name)
                }
                this.editing = useEditingStore()
                this.editing.init(data);
            }

        },
        loadSocialIcons() {
            Object.values(iconComponents).map(component => (
                this.socialIconsMap[component.name] = shallowRef(component)
            ))
        },
        init() {
            this.initEditingStore(this.$options.name);
            this.loadSocialIcons();
        }
    },
    computed: {
        textStyle() {
            let fontName = this.editing?.design?.font || "Arial"
            return {
                color: this.editing.design?.TextColor,
                fontFamily: jsonData.fontList[fontName],
                fontSize: this.editing.design?.fontSize + 'px'
            }
        }
    },
    mounted() {
        this.store = useStore();
        
        this.templates = useTemplatesStore()

        this.init()
    }
}
</script>
<style scoped></style>