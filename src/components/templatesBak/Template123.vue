<template>
    <div><!---->
        <table cellpadding="0" width="500" style="border-collapse: collapse; font-size: 16.2px;">
            <tr>
                <td style="margin: 0.1px; padding: 0px;">
                    <table cellpadding="0" style="border-collapse: collapse;">
                        <tr>
                            <td valign="top" style="margin: 0.1px; padding: 0px 9px 0px 0px; cursor: pointer;"><img
                                    src="https://img.mysignature.io/p/3/a/3/3a3fe5fd-d549-5eda-9699-53943f151436.png?time=1685569257"
                                    width="149" alt=" &quot;created with MySignature.io&quot;"
                                    style="display: block; min-width: 149px;"></td>
                            <td valign="top"
                                style="border-left: 2px solid rgb(223, 16, 87); margin: 0.1px; padding: 0px 0px 0px 9px;">
                                <table cellpadding="0" style="border-collapse: collapse;">
                                    <tr>
                                        <td
                                            style="margin: 0.1px; padding: 0px; font: 19.4px / 24.7px Verdana, Geneva, sans-serif; color: rgb(0, 0, 1);">
                                            <span
                                                style="font: 19.4px / 24.7px Verdana, Geneva, sans-serif; color: rgb(223, 16, 87); cursor: pointer;">Mehdi
                                                Bolton</span><!----><!---->&nbsp;&nbsp;<span
                                                style="font: 16.2px / 20.6px Verdana, Geneva, sans-serif; color: rgb(0, 0, 1); cursor: pointer;">Travel
                                                Blogger</span></td>
                                    </tr>
                                    <tr>
                                        <td
                                            style="margin: 0.1px; padding: 5px 0px; font: 16.2px / 20.6px Verdana, Geneva, sans-serif; color: rgb(0, 0, 1);">
                                            <span style="cursor: pointer;">@mehdi_now</span><!----><!----></td>
                                    </tr>
                                    <tr style="cursor: pointer;">
                                        <td
                                            style="margin: 0.1px; padding: 0px; font: 16.2px / 20.6px Verdana, Geneva, sans-serif; color: rgb(0, 0, 1);">
                                            <span style="color: rgb(0, 0, 1);">w:&nbsp;</span><span
                                                style="color: rgb(0, 0, 1); text-decoration: none; font-family: Verdana, Geneva, sans-serif;">mysignature.io</span>
                                        </td>
                                    </tr>
                                    <tr style="cursor: pointer;">
                                        <td
                                            style="margin: 0.1px; padding: 0px; font: 16.2px / 20.6px Verdana, Geneva, sans-serif; color: rgb(0, 0, 1);">
                                            <span style="color: rgb(0, 0, 1);">e:&nbsp;</span><span
                                                style="color: rgb(0, 0, 1); text-decoration: none; font-family: Verdana, Geneva, sans-serif;">mehdib@mysignature.io</span>
                                        </td>
                                    </tr><!---->
                                    <tr>
                                        <td
                                            style="margin: 0.1px; padding: 8px 0px 0px; font: 16.2px / 20.6px Verdana, Geneva, sans-serif; color: rgb(0, 0, 1);">
                                            <table cellpadding="0" style="border-collapse: collapse;">
                                                <tr>
                                                    <td
                                                        style="margin: 0.1px; padding: 0px 4px 0px 0px; font: 16.2px / 20.6px Verdana, Geneva, sans-serif; color: rgb(0, 0, 1); cursor: pointer;">
                                                        <span
                                                            style="border-radius: 50%; width: 21px; height: 21px; display: block; text-align: center; background-color: rgb(28, 105, 212); font-size: 12px; font-family: initial; line-height: 1;"><svg
                                                                viewBox="0 0 1053 1024"
                                                                xmlns="http://www.w3.org/2000/svg"
                                                                style="position: relative; top: 4.2px; width: 12.6px;">
                                                                <path
                                                                    d="M529.314 0c-282.77 0-512 229.23-512 512s229.23 512 512 512c282.77 0 512-229.23 512-512s-229.23-512-512-512zM796.625 362.543c26.244-3.104 51.27-10.053 74.533-20.331-17.39 25.922-39.386 48.681-64.758 66.899 0.252 5.533 0.377 11.115 0.377 16.715 0 170.821-130.525 367.774-369.199 367.774-73.275 0-141.499-21.39-198.893-58.078 10.132 1.205 20.486 1.814 30.938 1.814 60.81 0 116.752-20.658 161.171-55.331-56.794-1.050-104.705-38.423-121.215-89.764 7.917 1.504 16.036 2.305 24.415 2.305 11.817 0 23.303-1.571 34.181-4.541-59.351-11.867-104.097-64.102-104.097-126.73 0-0.541 0-1.088 0.010-1.638 17.486 9.708 37.509 15.518 58.768 16.185-34.798-23.175-57.722-62.754-57.722-107.587 0-23.684 6.406-45.902 17.573-64.989 64.005 78.225 159.623 129.679 267.465 135.069-2.226-9.468-3.379-19.327-3.379-29.459 0-71.37 58.111-129.255 129.761-129.255 37.344 0 71.066 15.694 94.738 40.805 29.544-5.796 57.326-16.542 82.4-31.358-9.708 30.2-30.269 55.504-57.066 71.496z"
                                                                    fill="#ffffff"></path>
                                                            </svg></span></td>
                                                    <td
                                                        style="margin: 0.1px; padding: 0px 4px 0px 0px; font: 16.2px / 20.6px Verdana, Geneva, sans-serif; color: rgb(0, 0, 1); cursor: pointer;">
                                                        <span
                                                            style="border-radius: 50%; width: 21px; height: 21px; display: block; text-align: center; background-color: rgb(28, 105, 212); font-size: 12px; font-family: initial; line-height: 1;"><svg
                                                                viewBox="0 0 1024 1024"
                                                                xmlns="http://www.w3.org/2000/svg"
                                                                style="position: relative; top: 4.2px; width: 12.6px;">
                                                                <path
                                                                    d="M519.85 160.015c0.849 0.003 1.763 0.006 2.74 0.009l10.445 0.047c32.116 0.171 97.222 0.754 168.688 2.734l17.984 0.525 18.156 0.587c3.035 0.103 6.074 0.209 9.114 0.317l18.242 0.685c36.455 1.44 72.559 3.302 104.981 5.708 20 2.453 63.6 2.657 102.6 44.352 30.8 31.68 40.8 103.829 40.8 103.829v0l0.268 2.306c1.612 14.109 9.951 90.704 10.132 167.131v0 79.302c0 84.821-10.2 169.437-10.2 169.437s-10 72.149-40.8 103.829c-39 41.695-82.6 41.899-102.6 44.352-24.317 1.77-50.71 3.251-77.773 4.491l-18.126 0.791c-3.032 0.126-6.069 0.249-9.108 0.37l-18.25 0.689c-97.327 3.504-193.246 4.282-224.543 4.448l-5.095 0.025c-0.718 0.003-1.369 0.006-1.951 0.008h-4.71c-19.049-0.186-268.198-2.748-347.044-10.413-22.8-4.497-74-3.066-113-44.761-30.6-31.68-40.6-103.829-40.6-103.829s-10.2-84.821-10.2-169.437l0.031-87.507c0.349-46.459 3.568-92.038 6.292-122.816l0.935-10.225c1.356-14.348 2.462-24.089 2.82-27.157l0.122-1.034c0 0 9.8-72.149 40.6-103.829 39-41.695 82.6-41.899 102.6-44.352 29.721-2.206 62.534-3.954 95.877-5.339l27.346-1.054c88.16-3.149 175.135-3.956 213.942-4.163l10.445-0.047c0.977-0.003 1.891-0.006 2.74-0.009zM406 369.702v294.114l276.6-146.546-276.6-147.568z"
                                                                    fill="#ffffff"></path>
                                                            </svg></span></td>
                                                    <td
                                                        style="margin: 0.1px; padding: 0px 4px 0px 0px; font: 16.2px / 20.6px Verdana, Geneva, sans-serif; color: rgb(0, 0, 1); cursor: pointer;">
                                                        <span
                                                            style="border-radius: 50%; width: 21px; height: 21px; display: block; text-align: center; background-color: rgb(28, 105, 212); font-size: 12px; font-family: initial; line-height: 1;"><svg
                                                                viewBox="0 0 1024 1024"
                                                                xmlns="http://www.w3.org/2000/svg"
                                                                style="position: relative; top: 4.2px; width: 12.6px;">
                                                                <path
                                                                    d="M128 367.385c0-227.077 211.251-367.385 425-367.385 196.25 0 375 132.924 375 336.615 0 191.384-99.375 403.692-320.625 403.692-52.5 0-118.749-25.846-144.375-73.846-47.5 185.231-43.75 212.923-148.75 354.462l-8.75 3.077-5.625-6.154c-3.75-38.769-9.375-76.924-9.375-115.693 0-125.538 58.75-307.077 87.5-428.923-15.625-31.385-20-69.538-20-104 0-62.154 43.75-140.923 115-140.923 52.5 0 80.625 39.384 80.625 88 0 80-55 155.077-55 232.615 0 52.923 44.375 89.847 96.25 89.847 143.75 0 188.125-204.307 188.125-313.231 0-145.847-105-225.231-246.875-225.231-165 0-292.5 116.923-292.5 281.846 0 79.384 49.375 120 49.375 139.077 0 16-11.875 72.616-32.5 72.616-3.125 0-7.5-1.231-10.625-1.846-89.375-26.461-121.875-144-121.875-224.615v-0.001z"
                                                                    fill="#ffffff"></path>
                                                            </svg></span></td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr><!---->
        </table>
        <div>
            <table cellpadding="0" style="border-collapse: collapse;">
                <tr>
                    <td style="padding: 14px 4px 4px 0px; margin: 0.1px;"><span><img
                                src="https://img.mysignature.io/addons/v2/instagram_v1_shape3_b.png" height="35"
                                width="123" alt="instagram" style="display: block;"></span></td>
                    <td style="padding: 14px 4px 4px 0px; margin: 0.1px;"><span><img
                                src="https://img.mysignature.io/addons/v2/facebook_v1_shape3_b.png" height="35"
                                width="123" alt="facebook" style="display: block;"></span></td>
                    <td style="padding: 14px 4px 4px 0px; margin: 0.1px;"><!----></td>
                    <td style="padding: 14px 4px 4px 0px; margin: 0.1px;"><!----></td>
                </tr>
            </table><!---->
            <table width="500" cellspacing="0" cellpadding="0" border="0">
                <tr>
                    <td style="margin: 0.1px; line-height: 1px; font-size: 1px; height: 1px;">&nbsp;</td>
                </tr>
            </table>
        </div><!---->
    </div>
</template>
<script>
import { shallowRef, ref, computed } from 'vue'
import { useStore } from '@/stores/store'
import { useEditingStore, useTemplatesStore } from '@/stores'
import * as iconComponents from '@/components/svg-icon-a'
import jsonData from '@/stores/data.json'

export default {
    name: 'Template123',
    data() {
        return {
            editing: {},
            socialIconsMap: {}
        }
    },
    props: {
                type: {
            type: String,
            default: 'preview' // editing | preview
        },
        data: {
            type: Object,
            default: () => (null)
        }
    },
    methods: {
        // saveTemplate() {
        //     this.store.saveTemplate('Template1', this.data);
        // },
         initEditingStore() {
            if (this.type === 'preview') {
                let data = this.store.loadTemplateByName(this.$options.name);
                if (!data) {
                    data = this.templates.getTemplate(this.$options.name)
                }
                this.editing = data
            }

            if (this.type === 'editing') {
                let data = this.store.loadTemplateByName(this.$options.name);
                if (!data) {
                    data = this.templates.getTemplate(this.$options.name)
                }
                this.editing = useEditingStore()
                this.editing.init(data);
            }

        },
        loadSocialIcons() {
            Object.values(iconComponents).map(component => (
                this.socialIconsMap[component.name] = shallowRef(component)
            ))
        },
        init() {
            this.initEditingStore(this.$options.name);
            this.loadSocialIcons();
        }
    },
    computed: {
        textStyle() {
            let fontName = this.editing?.design?.font || "Arial"
            return {
                color: this.editing.design?.TextColor,
                fontFamily: jsonData.fontList[fontName],
                fontSize: this.editing.design?.fontSize + 'px'
            }
        }
    },
    mounted() {
        this.store = useStore();
        
        this.templates = useTemplatesStore()

        this.init()
    }
}
</script>
<style scoped></style>